(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[15],{244:function(e,s,t){"use strict";t.r(s);var a=t(64),n=t.n(a),i=t(65),o=t(30),r=t(33),c=t(32),l=t(31),p=t(1),d=t(61),h=t.n(d),u=t(250),j=t(29),m=t(4),b=t(3),x=function(e){Object(c.a)(t,e);var s=Object(l.a)(t);function t(e){var a;return Object(o.a)(this,t),(a=s.call(this,e)).onChangeEmail=function(e){a.setState({email:e.target.value})},a.onChangePassword=function(e){a.setState({password:e.target.value})},a.onLogin=Object(i.a)(n.a.mark((function e(){var s,t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=h.a.post("/api/signin",{email:a.state.email,password:a.state.password}),e.next=4,s;case 4:t=e.sent,localStorage.setItem("token",t.data.token),a.setState({apiResponse:"success"}),console.log(t),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),a.setState({apiResponse:e.t0.response.statusText}),console.log(e.t0.response);case 14:case"end":return e.stop()}}),e,null,[[0,10]])}))),a.onSignup=function(){h.a.post("/api/signup",{email:a.state.email,password:a.state.password}).then((function(e){console.log(e)})).catch((function(e){console.log(e.response.data.error)}))},a.redirectLoginSuccessListener=function(){if("success"===a.state.apiResponse)return Object(b.jsx)(u.a,{to:{pathname:"/dashboard",state:{referrer:"test"}}})},a.state={email:"admin",password:"admin",apiResponse:""},a}return Object(r.a)(t,[{key:"render",value:function(){var e="Bad Request"===this.state.apiResponse?"Please fill the email and password fields":"Unauthorized"===this.state.apiResponse&&"Email or password incorrect";return Object(b.jsxs)("div",{children:[this.redirectLoginSuccessListener(),Object(b.jsxs)(m.m,{className:"App",style:{paddingTop:"150px",paddingBottom:"200px"},children:[Object(b.jsx)("h2",{children:"Admin Dashboard"}),Object(b.jsxs)(m.s,{className:"form",children:[Object(b.jsx)(m.k,{children:Object(b.jsxs)(m.u,{children:[Object(b.jsx)(m.A,{children:"Admin"}),Object(b.jsx)(m.v,{type:"email",name:"email",id:"exampleEmail",placeholder:"Admin",value:this.state.email,onChange:this.onChangeEmail})]})}),Object(b.jsx)(m.k,{children:Object(b.jsxs)(m.u,{children:[Object(b.jsx)(m.A,{for:"examplePassword",children:"Password"}),Object(b.jsx)(m.v,{type:"password",name:"password",id:"examplePassword",placeholder:"********",value:this.state.password,onChange:this.onChangePassword})]})}),Object(b.jsx)(m.c,{onClick:this.onLogin,children:"Login"}),Object(b.jsx)(j.a,{to:"/dashboard",children:"secret page"}),Object(b.jsx)("p",{children:e})]})]})]})}}]),t}(p.Component);s.default=x}}]);
//# sourceMappingURL=15.2dd07da8.chunk.js.map